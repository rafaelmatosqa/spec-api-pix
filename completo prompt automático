Com base no **Guia de Implementa√ß√£o do Pix Autom√°tico (vers√£o 1.2)** e no conte√∫do fornecido no arquivo `guia_pix_automatico.pdf`, apresento abaixo uma **an√°lise completa e detalhada das jornadas de autoriza√ß√£o do Pix Autom√°tico**, com foco no **contexto do usu√°rio recebedor**.

Cada jornada √© descrita com **cen√°rios realistas, passo a passo**, destacando as **a√ß√µes do recebedor**, as **intera√ß√µes com o PSP recebedor**, as **responsabilidades operacionais**, os **fluxos de sucesso e falha**, e as **melhores pr√°ticas** para implementa√ß√£o.

Este documento √© uma **refer√™ncia estrat√©gica e operacional** para recebedores (pessoas jur√≠dicas, prestadores de servi√ßos, empresas de cobran√ßa), seus gestores financeiros e equipes de tecnologia.

---

# üìò **Jornadas do Pix Autom√°tico: Vis√£o do Recebedor**

> **Baseado no Guia de Implementa√ß√£o do Pix Autom√°tico ‚Äì Vers√£o 1.2**  
> **Foco: A√ß√µes, decis√µes e responsabilidades do usu√°rio recebedor**

---

## üîç **1. Introdu√ß√£o: O Papel do Recebedor no Pix Autom√°tico**

O **usu√°rio recebedor** √© o **iniciador do processo** de recorr√™ncia. Ele define os termos da cobran√ßa, escolhe a jornada de autoriza√ß√£o mais adequada ao seu modelo de neg√≥cio e interage com seu **PSP recebedor** (seu banco ou institui√ß√£o de pagamento) para criar, gerir e acompanhar as recorr√™ncias.

O recebedor pode:
- Ofertar o Pix Autom√°tico como forma de pagamento.
- Escolher entre **4 jornadas de autoriza√ß√£o**.
- Gerir recorr√™ncias via **API Pix** ou **arquivo padronizado**.
- Reutilizar QR Codes.
- Oferecer autoriza√ß√£o ap√≥s um pagamento inicial.
- Cancelar cobran√ßas agendadas (com restri√ß√µes).
- Receber notifica√ß√µes de sucesso, falha e cancelamento.

Este guia detalha cada jornada sob a **perspectiva do recebedor**, com **cen√°rios completos**, **fluxos operacionais** e **recomenda√ß√µes pr√°ticas**.

---

## üü¶ **Jornada 1: Autoriza√ß√£o sem QR Code, com notifica√ß√£o via app**

### **Contexto**
O usu√°rio pagador entra em contato diretamente com o recebedor (por WhatsApp, liga√ß√£o, e-mail) e informa que deseja pagar por **Pix Autom√°tico**.

Esta jornada √© ideal para:
- Relacionamentos B2B com poucos clientes.
- Cobran√ßas de alto valor.
- Empresas com atendimento personalizado.
- Casos em que o pagador j√° confia na empresa.

---

### **Cen√°rio 1.1: Cria√ß√£o e envio da solicita√ß√£o de autoriza√ß√£o**

**Como** recebedor de uma academia premium,  
**Quero** solicitar autoriza√ß√£o de Pix Autom√°tico a um novo aluno via notifica√ß√£o no app,  
**Para que** ele possa confirmar a mensalidade recorrente sem precisar escanear QR Code.

#### **Passo a Passo:**

1. **Acesso ao sistema do PSP recebedor**
   - O respons√°vel financeiro da academia acessa a plataforma do PSP (ex: internet banking corporativo ou painel de cobran√ßa).

2. **Cria√ß√£o da recorr√™ncia**
   - Informa os dados:
     - `idRecorrencia`: `RR123456782025030100001`
     - `formaDeIniciacao`: `AUTO`
     - `valor`: `299,90` (fixo)
     - `periodicidade`: `MENSAL`
     - `dataInicio`: `2025-04-15`
     - `dataFim`: `2026-04-15`
     - `descricao`: "Mensalidade Academia Premium"
     - `idObjetoCobranca`: `ACAD12345`
     - `politicaRetentativa`: `S` (permite retentativas p√≥s-vencimento)
   - Define `dataExpiracaoSolicitacao`: `2025-04-10` (5 dias antes do primeiro pagamento).

3. **Envio da solicita√ß√£o**
   - Clica em ‚ÄúEnviar para autoriza√ß√£o‚Äù.
   - O PSP recebedor valida os dados e envia uma mensagem `pain.009` ao **PSP pagador** do aluno.

4. **Notifica√ß√£o ao pagador**
   - O PSP pagador recebe a `pain.009`.
   - Notifica o aluno no app:  
     > ‚ÄúVoc√™ foi convidado a autorizar um pagamento recorrente de R$299,90/m√™s para Academia Premium. Deseja confirmar?‚Äù

5. **Confirma√ß√£o pelo pagador**
   - O aluno abre o app, confirma com biometria e autoriza.

6. **Retorno ao recebedor**
   - O PSP pagador envia `pain.012` com `status = true`.
   - O PSP recebedor atualiza o status da recorr√™ncia para **‚Äúconfirmada‚Äù**.
   - O sistema da academia √© notificado:  
     > ‚ÄúAutoriza√ß√£o de Pix Autom√°tico confirmada para o aluno ACAD12345.‚Äù

7. **Agendamento**
   - Em `2025-04-05` (10 dias antes), o PSP recebedor envia `pain.013` com `idFimAFim = 20250415`.
   - O d√©bito ser√° liquidado entre 0h e 8h do dia 15/04.

#### **Boas Pr√°ticas para o Recebedor:**
- Defina `dataExpiracaoSolicitacao` com anteced√™ncia suficiente.
- Monitore o status da recorr√™ncia (‚Äúpendente‚Äù ‚Üí ‚Äúconfirmada‚Äù).
- Se o pagador n√£o confirmar, voc√™ pode reenviar a solicita√ß√£o com nova `dataExpiracao`.

---

### **Cen√°rio 1.2: Falha na autoriza√ß√£o**

**Como** recebedor,  
**Quero** saber o que fazer se o pagador n√£o confirmar a autoriza√ß√£o,  
**Para que** eu possa tomar uma a√ß√£o alternativa.

#### **Fluxo:**
- O PSP pagador **n√£o envia `pain.012`**.
- A recorr√™ncia permanece em **‚Äúpendente de confirma√ß√£o‚Äù**.
- Ap√≥s `2025-04-10`, a solicita√ß√£o expira.
- O sistema do PSP recebedor notifica:  
  > ‚ÄúSolicita√ß√£o de autoriza√ß√£o expirada. Recorr√™ncia RR123456782025030100001 n√£o foi confirmada.‚Äù

#### **A√ß√µes do Recebedor:**
1. Contatar o pagador por outro canal.
2. Tentar novamente com nova `dataExpiracao`.
3. Oferecer outra jornada (ex: Jornada 4 ap√≥s pr√≥ximo pagamento).

---

## üü® **Jornada 2: Autoriza√ß√£o com QR Code contendo apenas os dados da recorr√™ncia**

### **Contexto**
O recebedor disponibiliza um **QR Code fixo** (impresso ou digital) que aponta apenas para os dados da recorr√™ncia.

Ideal para:
- Academias, cl√≠nicas, assinaturas f√≠sicas.
- Reutiliza√ß√£o de QR Codes.
- Ambientes com m√∫ltiplos pagadores (ex: recep√ß√£o).

---

### **Cen√°rio 2.1: Reutiliza√ß√£o de QR Code em academia**

**Como** recebedor de uma academia com 500 alunos,  
**Quero** usar um √∫nico QR Code impresso na recep√ß√£o para todos os novos alunos,  
**Para que** cada um possa autorizar sua mensalidade recorrente.

#### **Passo a Passo:**

1. **Cria√ß√£o da recorr√™ncia**
   - O PSP recebedor cria uma recorr√™ncia com:
     - `idRecorrencia`: `RR234567892025030100002`
     - `valor`: `299,90`
     - `periodicidade`: `MENSAL`
     - `dataInicio`: `2025-04-01`
     - `dataFim`: `2026-04-01`
     - `descricao`: "Mensalidade Academia"
     - `idObjetoCobranca`: `NOVO_ALUNO`
   - Gera um `location` (ex: `https://pix.bcb.gov.br/api/v2/rec/RR234567892025030100002`).

2. **Gera√ß√£o do QR Code**
   - O sistema gera um QR Code com:
     - **Faixa 26-51**: preenchida (marca√ß√£o de aus√™ncia de cobran√ßa imediata).
     - **Faixa 80-99**: `location` da recorr√™ncia.
   - Imprime o QR Code e o coloca na recep√ß√£o.

3. **Aluno l√™ o QR Code**
   - O novo aluno abre o app do banco e l√™ o QR Code.
   - O app acessa `GET /pix/v2/rec/RR234567892025030100002`.
   - Exibe:  
     > ‚ÄúAutorizar pagamento recorrente de R$299,90/m√™s para Academia XYZ?‚Äù

4. **Confirma√ß√£o**
   - O aluno confirma com senha.
   - O PSP pagador envia `pain.012` com `status = true`.

5. **Atualiza√ß√£o no sistema do recebedor**
   - O PSP recebedor atualiza o status para **‚Äúconfirmada‚Äù**.
   - O sistema da academia recebe a notifica√ß√£o.
   - O funcion√°rio altera o `idObjetoCobranca` para o c√≥digo do aluno (ex: `ALUNO789`).

6. **Reutiliza√ß√£o**
   - O **mesmo QR Code** continua v√°lido.
   - O pr√≥ximo aluno l√™, confirma, e o processo se repete.

#### **Boas Pr√°ticas para o Recebedor:**
- Use QR Codes com **faixa 26-51 preenchida** para compatibilidade.
- Atualize o `idObjetoCobranca` ap√≥s cada confirma√ß√£o.
- N√£o envie `pain.009` ‚Äî a autoriza√ß√£o √© iniciada pelo QR Code.

---

### **Cen√°rio 2.2: QR Code com dados inv√°lidos**

**Como** recebedor,  
**Quero** saber o que acontece se o QR Code estiver corrompido,  
**Para que** eu possa corrigir rapidamente.

#### **Fluxo:**
- O aluno l√™ o QR Code.
- O app tenta acessar `GET /rec/{txid}`.
- Retorna erro 404 (recorr√™ncia n√£o encontrada).
- O app exibe: ‚ÄúN√£o foi poss√≠vel carregar os dados da recorr√™ncia.‚Äù
- **Nenhuma `pain.012` √© enviada.**
- O recebedor **n√£o √© notificado**.

#### **A√ß√£o do Recebedor:**
- Verificar se a recorr√™ncia ainda est√° ativa.
- Regerar o `location` e o QR Code se necess√°rio.

---

## üü• **Jornada 3: Autoriza√ß√£o com QR Code contendo pagamento imediato + recorr√™ncia**

### **Contexto**
O recebedor oferece um **QR Code composto** que inclui:
- Uma **cobran√ßa imediata** (primeiro pagamento).
- Uma **recorr√™ncia** (pagamentos futuros).

A aceita√ß√£o do pagamento imediato **implica automaticamente** na autoriza√ß√£o do Pix Autom√°tico.

Ideal para:
- Assinaturas digitais.
- Vendas online.
- Servi√ßos com entrada + mensalidades.

---

### **Cen√°rio 3.1: Assinatura de streaming com entrada**

**Como** recebedor de uma plataforma de streaming,  
**Quero** que o cliente pague a primeira mensalidade e autorize automaticamente as futuras,  
**Para que** o processo seja r√°pido e seguro.

#### **Passo a Passo:**

1. **Cria√ß√£o da cobran√ßa imediata e recorr√™ncia**
   - Cria cobran√ßa imediata:
     - `txid`: `TXID123`
     - `valor`: `29,90`
     - `location`: `https://pix.bcb.gov.br/api/v2/cobv/TXID123`
   - Cria recorr√™ncia:
     - `idRecorrencia`: `RR345678902025030100003`
     - `valor`: `29,90`
     - `periodicidade`: `MENSAL`
     - `dataInicio`: `2025-05-01`
     - `location`: `https://pix.bcb.gov.br/api/v2/rec/RR345678902025030100003`

2. **Gera√ß√£o do QR Code composto**
   - QR Code com:
     - **Faixa 26-51**: `location` da cobran√ßa imediata.
     - **Faixa 80-99**: `location` da recorr√™ncia.

3. **Cliente l√™ o QR Code**
   - App acessa ambos os `locations`.
   - Exibe:
     - Pagamento imediato: R$29,90
     - Checkbox: ‚ÄúAutorizar Pix Autom√°tico para pr√≥ximas mensalidades? [‚úì]‚Äù
   - **N√£o √© poss√≠vel desmarcar.**

4. **Confirma√ß√£o**
   - Cliente confirma.
   - PSP pagador inicia o pagamento imediato (`pacs.008`).
   - Ap√≥s sucesso, envia `pain.012` com `status = true`.

5. **Notifica√ß√£o ao recebedor**
   - Recebe confirma√ß√£o da autoriza√ß√£o.
   - Ativa a assinatura.
   - Agendar√° o pr√≥ximo d√©bito em `2025-05-01`.

#### **Regras Cr√≠ticas:**
- **N√£o pode haver dissocia√ß√£o** entre pagamento e autoriza√ß√£o.
- Se o pagamento falhar, **n√£o h√° autoriza√ß√£o**.
- O pagamento imediato aparece como **Pix normal** no extrato.

---

### **Cen√°rio 3.2: Falha no pagamento imediato**

**Como** recebedor,  
**Quero** entender o impacto de uma falha no pagamento inicial,  
**Para que** eu saiba que n√£o haver√° autoriza√ß√£o.

#### **Fluxo:**
- Cliente confirma.
- Pagamento imediato falha por saldo insuficiente.
- PSP pagador **n√£o envia `pain.012`**.
- Recorr√™ncia permanece n√£o autorizada.
- Recebedor n√£o √© notificado de autoriza√ß√£o.

#### **A√ß√£o do Recebedor:**
- Oferecer outra forma de pagamento.
- Tentar novamente com novo QR Code.

---

## üüß **Jornada 4: Autoriza√ß√£o ap√≥s pagamento/agendamento com vencimento**

### **Contexto**
O recebedor oferece o Pix Autom√°tico **ap√≥s** o cliente pagar ou agendar uma cobran√ßa com vencimento.

A autoriza√ß√£o √© **opcional** e ocorre **ap√≥s o pagamento inicial**.

Ideal para:
- Faturas de energia, √°gua, boletos.
- Clientes que j√° pagam manualmente.
- Migra√ß√£o de pagadores para autom√°tico.

---

### **Cen√°rio 4.1: Oferta p√≥s-pagamento de fatura de energia**

**Como** recebedor de uma concession√°ria de energia,  
**Quero** oferecer Pix Autom√°tico ap√≥s o cliente pagar a fatura,  
**Para que** ele n√£o precise mais se preocupar com vencimentos.

#### **Passo a Passo:**

1. **Gera√ß√£o do QR Code composto**
   - Cobran√ßa com vencimento:
     - `txid`: `FAT123`
     - `valor`: `150,00`
     - `dataDeVencimento`: `2025-04-10`
     - `location`: `https://pix.bcb.gov.br/api/v2/cobv/FAT123`
   - Recorr√™ncia:
     - `idRecorrencia`: `RR456789012025030100004`
     - `valor`: `150,00` (m√©dio)
     - `periodicidade`: `MENSAL`
     - `location`: `https://pix.bcb.gov.br/api/v2/rec/RR456789012025030100004`

2. **Cliente paga a fatura**
   - L√™ o QR Code.
   - Paga R$150,00 via Pix (com vencimento ou n√£o).

3. **Oferta de Pix Autom√°tico**
   - Ap√≥s o pagamento, o app do PSP pagador exibe:
     > ‚ÄúQuer autorizar pagamentos autom√°ticos mensais de at√© R$150,00 para Energia S.A.? [Sim] [N√£o]‚Äù

4. **Aceita√ß√£o**
   - Cliente clica em ‚ÄúSim‚Äù.
   - PSP pagador envia `pain.012` com `status = true`.

5. **Ativa√ß√£o**
   - PSP recebedor confirma.
   - Pr√≥xima fatura ser√° debitada automaticamente em `2025-05-10`.

#### **Regras:**
- A oferta **s√≥ √© feita ap√≥s o pagamento bem-sucedido**.
- Se o pagamento falhar, **n√£o h√° oferta**.
- O cliente pode **recusar** a autoriza√ß√£o.

---

### **Cen√°rio 4.2: Cliente recusa a oferta**

**Como** recebedor,  
**Quero** saber o que acontece se o cliente recusar,  
**Para que** eu possa continuar ofertando manualmente.

#### **Fluxo:**
- Cliente clica em ‚ÄúN√£o‚Äù.
- PSP pagador **n√£o envia `pain.012`**.
- Recorr√™ncia **n√£o √© autorizada**.
- Recebedor **n√£o √© notificado**.

#### **A√ß√£o do Recebedor:**
- Continuar ofertando via Jornada 1 ou 2.
- Enviar e-mail com QR Code da Jornada 2.

---

## üîÑ **5. Gest√£o Cont√≠nua da Recorr√™ncia (todas as jornadas)**

### **Altera√ß√µes na Recorr√™ncia**
- **Antes da confirma√ß√£o**: Pode alterar `valor`, `periodicidade`, `dataInicio`.
- **Ap√≥s a confirma√ß√£o**: **N√£o pode alterar**. Deve:
  1. Cancelar a recorr√™ncia.
  2. Criar uma nova.
  3. Solicitar nova autoriza√ß√£o.

### **Cancelamento**
- **Pelo pagador**: A qualquer momento (at√© v√©spera da liquida√ß√£o).
- **Pelo recebedor**: Pode cancelar cobran√ßa agendada, **mas n√£o ap√≥s 22h do dia anterior**.

### **Retentativas**
- **RIFL**: Nova tentativa intradi√°ria (at√© 23h59).
- **NTAG**: Nova tentativa p√≥s-vencimento (se `politicaRetentativa = S`).
  - **Pagador n√£o pode cancelar** agendamentos com `NTAG`.

---

## üì¢ **6. Notifica√ß√µes Obrigat√≥rias para o Recebedor**

O PSP recebedor **deve informar** o recebedor em:

| Situa√ß√£o | Notifica√ß√£o |
|--------|-------------|
| Sucesso do agendamento | ‚ÄúD√©bito agendado para 15/04‚Äù |
| Falha no agendamento | ‚ÄúValor divergente. D√©bito n√£o agendado.‚Äù |
| Cancelamento pelo pagador | ‚ÄúAutoriza√ß√£o cancelada pelo pagador‚Äù |
| Sucesso no cancelamento da cobran√ßa | ‚ÄúCobran√ßa cancelada com sucesso‚Äù |
| Falha no cancelamento da cobran√ßa | ‚ÄúCancelamento n√£o permitido ap√≥s 22h‚Äù |

---

## üìå **7. Boas Pr√°ticas para o Recebedor**

1. **Escolha a jornada certa**:
   - Jornada 1: Relacionamento direto.
   - Jornada 2: Reutiliza√ß√£o de QR Code.
   - Jornada 3: Entrada + recorr√™ncia.
   - Jornada 4: Migra√ß√£o de pagadores.

2. **Use API Pix ou arquivo padronizado** para escalar.

3. **Monitore o status** das recorr√™ncias: ‚Äúcriada‚Äù, ‚Äúpendente‚Äù, ‚Äúconfirmada‚Äù.

4. **Defina `dataFim` com margem** para retentativas.

5. **Ajuste para dia √∫til** com base no `codMunIBGE` do pagador.

6. **N√£o cobre tarifa do pagador** ‚Äì √© vedado.

7. **Ofere√ßa suporte** para cancelamento e d√∫vidas.

---

## üèÅ **Conclus√£o**

O **recebedor √© o protagonista** do Pix Autom√°tico. Ele define o modelo de neg√≥cio, escolhe a jornada, cria as recorr√™ncias e gerencia o relacionamento com o pagador.

As **quatro jornadas** oferecem flexibilidade para diferentes cen√°rios:
- **Jornada 1**: Relacionamento direto e personalizado.
- **Jornada 2**: Escalabilidade com QR Code reutiliz√°vel.
- **Jornada 3**: Convers√£o imediata com pagamento inicial.
- **Jornada 4**: Migra√ß√£o suave de pagadores manuais.

Com as boas pr√°ticas acima, o recebedor pode **automatizar cobran√ßas**, **reduzir inadimpl√™ncia** e **melhorar a experi√™ncia do cliente**.

---

Se desejar, posso gerar:
- Um **modelo de checklist operacional** para recebedores
- Um **fluxograma em portugu√™s** das jornadas
- Um **template de e-mail** para ofertar Pix Autom√°tico
- Um **relat√≥rio de impacto financeiro** por jornada

Deseja algum desses artefatos?
