Com base no **Guia de ImplementaÃ§Ã£o do Pix AutomÃ¡tico (versÃ£o 1.2)** e no conteÃºdo fornecido no arquivo `guia_pix_automatico.pdf`, apresento abaixo uma **anÃ¡lise completa e detalhada das jornadas de autorizaÃ§Ã£o do Pix AutomÃ¡tico**, com foco no **contexto do usuÃ¡rio recebedor**.

Cada jornada Ã© descrita com **cenÃ¡rios realistas, passo a passo**, destacando as **aÃ§Ãµes do recebedor**, as **interaÃ§Ãµes com o PSP recebedor**, as **responsabilidades operacionais**, os **fluxos de sucesso e falha**, e as **melhores prÃ¡ticas** para implementaÃ§Ã£o.

Este documento Ã© uma **referÃªncia estratÃ©gica e operacional** para recebedores (pessoas jurÃ­dicas, prestadores de serviÃ§os, empresas de cobranÃ§a), seus gestores financeiros e equipes de tecnologia.

---

# ğŸ“˜ **Jornadas do Pix AutomÃ¡tico: VisÃ£o do Recebedor**

> **Baseado no Guia de ImplementaÃ§Ã£o do Pix AutomÃ¡tico â€“ VersÃ£o 1.2**  
> **Foco: AÃ§Ãµes, decisÃµes e responsabilidades do usuÃ¡rio recebedor**

---

## ğŸ” **1. IntroduÃ§Ã£o: O Papel do Recebedor no Pix AutomÃ¡tico**

O **usuÃ¡rio recebedor** Ã© o **iniciador do processo** de recorrÃªncia. Ele define os termos da cobranÃ§a, escolhe a jornada de autorizaÃ§Ã£o mais adequada ao seu modelo de negÃ³cio e interage com seu **PSP recebedor** (seu banco ou instituiÃ§Ã£o de pagamento) para criar, gerir e acompanhar as recorrÃªncias.

O recebedor pode:
- Ofertar o Pix AutomÃ¡tico como forma de pagamento.
- Escolher entre **4 jornadas de autorizaÃ§Ã£o**.
- Gerir recorrÃªncias via **API Pix** ou **arquivo padronizado**.
- Reutilizar QR Codes.
- Oferecer autorizaÃ§Ã£o apÃ³s um pagamento inicial.
- Cancelar cobranÃ§as agendadas (com restriÃ§Ãµes).
- Receber notificaÃ§Ãµes de sucesso, falha e cancelamento.

Este guia detalha cada jornada sob a **perspectiva do recebedor**, com **cenÃ¡rios completos**, **fluxos operacionais** e **recomendaÃ§Ãµes prÃ¡ticas**.

---

## ğŸŸ¦ **Jornada 1: AutorizaÃ§Ã£o sem QR Code, com notificaÃ§Ã£o via app**

### **Contexto**
O usuÃ¡rio pagador entra em contato diretamente com o recebedor (por WhatsApp, ligaÃ§Ã£o, e-mail) e informa que deseja pagar por **Pix AutomÃ¡tico**.

Esta jornada Ã© ideal para:
- Relacionamentos B2B com poucos clientes.
- CobranÃ§as de alto valor.
- Empresas com atendimento personalizado.
- Casos em que o pagador jÃ¡ confia na empresa.

---

### **CenÃ¡rio 1.1: CriaÃ§Ã£o e envio da solicitaÃ§Ã£o de autorizaÃ§Ã£o**

**Como** recebedor de uma academia premium,  
**Quero** solicitar autorizaÃ§Ã£o de Pix AutomÃ¡tico a um novo aluno via notificaÃ§Ã£o no app,  
**Para que** ele possa confirmar a mensalidade recorrente sem precisar escanear QR Code.

#### **Passo a Passo:**

1. **Acesso ao sistema do PSP recebedor**
   - O responsÃ¡vel financeiro da academia acessa a plataforma do PSP (ex: internet banking corporativo ou painel de cobranÃ§a).

2. **CriaÃ§Ã£o da recorrÃªncia**
   - Informa os dados:
     - `idRecorrencia`: `RR123456782025030100001`
     - `formaDeIniciacao`: `AUTO`
     - `valor`: `299,90` (fixo)
     - `periodicidade`: `MENSAL`
     - `dataInicio`: `2025-04-15`
     - `dataFim`: `2026-04-15`
     - `descricao`: "Mensalidade Academia Premium"
     - `idObjetoCobranca`: `ACAD12345`
     - `politicaRetentativa`: `S` (permite retentativas pÃ³s-vencimento)
   - Define `dataExpiracaoSolicitacao`: `2025-04-10` (5 dias antes do primeiro pagamento).

3. **Envio da solicitaÃ§Ã£o**
   - Clica em â€œEnviar para autorizaÃ§Ã£oâ€.
   - O PSP recebedor valida os dados e envia uma mensagem `pain.009` ao **PSP pagador** do aluno.

4. **NotificaÃ§Ã£o ao pagador**
   - O PSP pagador recebe a `pain.009`.
   - Notifica o aluno no app:  
     > â€œVocÃª foi convidado a autorizar um pagamento recorrente de R$299,90/mÃªs para Academia Premium. Deseja confirmar?â€

5. **ConfirmaÃ§Ã£o pelo pagador**
   - O aluno abre o app, confirma com biometria e autoriza.

6. **Retorno ao recebedor**
   - O PSP pagador envia `pain.012` com `status = true`.
   - O PSP recebedor atualiza o status da recorrÃªncia para **â€œconfirmadaâ€**.
   - O sistema da academia Ã© notificado:  
     > â€œAutorizaÃ§Ã£o de Pix AutomÃ¡tico confirmada para o aluno ACAD12345.â€

7. **Agendamento**
   - Em `2025-04-05` (10 dias antes), o PSP recebedor envia `pain.013` com `idFimAFim = 20250415`.
   - O dÃ©bito serÃ¡ liquidado entre 0h e 8h do dia 15/04.

#### **Boas PrÃ¡ticas para o Recebedor:**
- Defina `dataExpiracaoSolicitacao` com antecedÃªncia suficiente.
- Monitore o status da recorrÃªncia (â€œpendenteâ€ â†’ â€œconfirmadaâ€).
- Se o pagador nÃ£o confirmar, vocÃª pode reenviar a solicitaÃ§Ã£o com nova `dataExpiracao`.

---

### **CenÃ¡rio 1.2: Falha na autorizaÃ§Ã£o**

**Como** recebedor,  
**Quero** saber o que fazer se o pagador nÃ£o confirmar a autorizaÃ§Ã£o,  
**Para que** eu possa tomar uma aÃ§Ã£o alternativa.

#### **Fluxo:**
- O PSP pagador **nÃ£o envia `pain.012`**.
- A recorrÃªncia permanece em **â€œpendente de confirmaÃ§Ã£oâ€**.
- ApÃ³s `2025-04-10`, a solicitaÃ§Ã£o expira.
- O sistema do PSP recebedor notifica:  
  > â€œSolicitaÃ§Ã£o de autorizaÃ§Ã£o expirada. RecorrÃªncia RR123456782025030100001 nÃ£o foi confirmada.â€

#### **AÃ§Ãµes do Recebedor:**
1. Contatar o pagador por outro canal.
2. Tentar novamente com nova `dataExpiracao`.
3. Oferecer outra jornada (ex: Jornada 4 apÃ³s prÃ³ximo pagamento).

---

## ğŸŸ¨ **Jornada 2: AutorizaÃ§Ã£o com QR Code contendo apenas os dados da recorrÃªncia**

### **Contexto**
O recebedor disponibiliza um **QR Code fixo** (impresso ou digital) que aponta apenas para os dados da recorrÃªncia.

Ideal para:
- Academias, clÃ­nicas, assinaturas fÃ­sicas.
- ReutilizaÃ§Ã£o de QR Codes.
- Ambientes com mÃºltiplos pagadores (ex: recepÃ§Ã£o).

---

### **CenÃ¡rio 2.1: ReutilizaÃ§Ã£o de QR Code em academia**

**Como** recebedor de uma academia com 500 alunos,  
**Quero** usar um Ãºnico QR Code impresso na recepÃ§Ã£o para todos os novos alunos,  
**Para que** cada um possa autorizar sua mensalidade recorrente.

#### **Passo a Passo:**

1. **CriaÃ§Ã£o da recorrÃªncia**
   - O PSP recebedor cria uma recorrÃªncia com:
     - `idRecorrencia`: `RR234567892025030100002`
     - `valor`: `299,90`
     - `periodicidade`: `MENSAL`
     - `dataInicio`: `2025-04-01`
     - `dataFim`: `2026-04-01`
     - `descricao`: "Mensalidade Academia"
     - `idObjetoCobranca`: `NOVO_ALUNO`
   - Gera um `location` (ex: `https://pix.bcb.gov.br/api/v2/rec/RR234567892025030100002`).

2. **GeraÃ§Ã£o do QR Code**
   - O sistema gera um QR Code com:
     - **Faixa 26-51**: preenchida (marcaÃ§Ã£o de ausÃªncia de cobranÃ§a imediata).
     - **Faixa 80-99**: `location` da recorrÃªncia.
   - Imprime o QR Code e o coloca na recepÃ§Ã£o.

3. **Aluno lÃª o QR Code**
   - O novo aluno abre o app do banco e lÃª o QR Code.
   - O app acessa `GET /pix/v2/rec/RR234567892025030100002`.
   - Exibe:  
     > â€œAutorizar pagamento recorrente de R$299,90/mÃªs para Academia XYZ?â€

4. **ConfirmaÃ§Ã£o**
   - O aluno confirma com senha.
   - O PSP pagador envia `pain.012` com `status = true`.

5. **AtualizaÃ§Ã£o no sistema do recebedor**
   - O PSP recebedor atualiza o status para **â€œconfirmadaâ€**.
   - O sistema da academia recebe a notificaÃ§Ã£o.
   - O funcionÃ¡rio altera o `idObjetoCobranca` para o cÃ³digo do aluno (ex: `ALUNO789`).

6. **ReutilizaÃ§Ã£o**
   - O **mesmo QR Code** continua vÃ¡lido.
   - O prÃ³ximo aluno lÃª, confirma, e o processo se repete.

#### **Boas PrÃ¡ticas para o Recebedor:**
- Use QR Codes com **faixa 26-51 preenchida** para compatibilidade.
- Atualize o `idObjetoCobranca` apÃ³s cada confirmaÃ§Ã£o.
- NÃ£o envie `pain.009` â€” a autorizaÃ§Ã£o Ã© iniciada pelo QR Code.

---

### **CenÃ¡rio 2.2: QR Code com dados invÃ¡lidos**

**Como** recebedor,  
**Quero** saber o que acontece se o QR Code estiver corrompido,  
**Para que** eu possa corrigir rapidamente.

#### **Fluxo:**
- O aluno lÃª o QR Code.
- O app tenta acessar `GET /rec/{txid}`.
- Retorna erro 404 (recorrÃªncia nÃ£o encontrada).
- O app exibe: â€œNÃ£o foi possÃ­vel carregar os dados da recorrÃªncia.â€
- **Nenhuma `pain.012` Ã© enviada.**
- O recebedor **nÃ£o Ã© notificado**.

#### **AÃ§Ã£o do Recebedor:**
- Verificar se a recorrÃªncia ainda estÃ¡ ativa.
- Regerar o `location` e o QR Code se necessÃ¡rio.

---

## ğŸŸ¥ **Jornada 3: AutorizaÃ§Ã£o com QR Code contendo pagamento imediato + recorrÃªncia**

### **Contexto**
O recebedor oferece um **QR Code composto** que inclui:
- Uma **cobranÃ§a imediata** (primeiro pagamento).
- Uma **recorrÃªncia** (pagamentos futuros).

A aceitaÃ§Ã£o do pagamento imediato **implica automaticamente** na autorizaÃ§Ã£o do Pix AutomÃ¡tico.

Ideal para:
- Assinaturas digitais.
- Vendas online.
- ServiÃ§os com entrada + mensalidades.

---

### **CenÃ¡rio 3.1: Assinatura de streaming com entrada**

**Como** recebedor de uma plataforma de streaming,  
**Quero** que o cliente pague a primeira mensalidade e autorize automaticamente as futuras,  
**Para que** o processo seja rÃ¡pido e seguro.

#### **Passo a Passo:**

1. **CriaÃ§Ã£o da cobranÃ§a imediata e recorrÃªncia**
   - Cria cobranÃ§a imediata:
     - `txid`: `TXID123`
     - `valor`: `29,90`
     - `location`: `https://pix.bcb.gov.br/api/v2/cobv/TXID123`
   - Cria recorrÃªncia:
     - `idRecorrencia`: `RR345678902025030100003`
     - `valor`: `29,90`
     - `periodicidade`: `MENSAL`
     - `dataInicio`: `2025-05-01`
     - `location`: `https://pix.bcb.gov.br/api/v2/rec/RR345678902025030100003`

2. **GeraÃ§Ã£o do QR Code composto**
   - QR Code com:
     - **Faixa 26-51**: `location` da cobranÃ§a imediata.
     - **Faixa 80-99**: `location` da recorrÃªncia.

3. **Cliente lÃª o QR Code**
   - App acessa ambos os `locations`.
   - Exibe:
     - Pagamento imediato: R$29,90
     - Checkbox: â€œAutorizar Pix AutomÃ¡tico para prÃ³ximas mensalidades? [âœ“]â€
   - **NÃ£o Ã© possÃ­vel desmarcar.**

4. **ConfirmaÃ§Ã£o**
   - Cliente confirma.
   - PSP pagador inicia o pagamento imediato (`pacs.008`).
   - ApÃ³s sucesso, envia `pain.012` com `status = true`.

5. **NotificaÃ§Ã£o ao recebedor**
   - Recebe confirmaÃ§Ã£o da autorizaÃ§Ã£o.
   - Ativa a assinatura.
   - AgendarÃ¡ o prÃ³ximo dÃ©bito em `2025-05-01`.

#### **Regras CrÃ­ticas:**
- **NÃ£o pode haver dissociaÃ§Ã£o** entre pagamento e autorizaÃ§Ã£o.
- Se o pagamento falhar, **nÃ£o hÃ¡ autorizaÃ§Ã£o**.
- O pagamento imediato aparece como **Pix normal** no extrato.

---

### **CenÃ¡rio 3.2: Falha no pagamento imediato**

**Como** recebedor,  
**Quero** entender o impacto de uma falha no pagamento inicial,  
**Para que** eu saiba que nÃ£o haverÃ¡ autorizaÃ§Ã£o.

#### **Fluxo:**
- Cliente confirma.
- Pagamento imediato falha por saldo insuficiente.
- PSP pagador **nÃ£o envia `pain.012`**.
- RecorrÃªncia permanece nÃ£o autorizada.
- Recebedor nÃ£o Ã© notificado de autorizaÃ§Ã£o.

#### **AÃ§Ã£o do Recebedor:**
- Oferecer outra forma de pagamento.
- Tentar novamente com novo QR Code.

---

## ğŸŸ§ **Jornada 4: AutorizaÃ§Ã£o apÃ³s pagamento/agendamento com vencimento**

### **Contexto**
O recebedor oferece o Pix AutomÃ¡tico **apÃ³s** o cliente pagar ou agendar uma cobranÃ§a com vencimento.

A autorizaÃ§Ã£o Ã© **opcional** e ocorre **apÃ³s o pagamento inicial**.

Ideal para:
- Faturas de energia, Ã¡gua, boletos.
- Clientes que jÃ¡ pagam manualmente.
- MigraÃ§Ã£o de pagadores para automÃ¡tico.

---

### **CenÃ¡rio 4.1: Oferta pÃ³s-pagamento de fatura de energia**

**Como** recebedor de uma concessionÃ¡ria de energia,  
**Quero** oferecer Pix AutomÃ¡tico apÃ³s o cliente pagar a fatura,  
**Para que** ele nÃ£o precise mais se preocupar com vencimentos.

#### **Passo a Passo:**

1. **GeraÃ§Ã£o do QR Code composto**
   - CobranÃ§a com vencimento:
     - `txid`: `FAT123`
     - `valor`: `150,00`
     - `dataDeVencimento`: `2025-04-10`
     - `location`: `https://pix.bcb.gov.br/api/v2/cobv/FAT123`
   - RecorrÃªncia:
     - `idRecorrencia`: `RR456789012025030100004`
     - `valor`: `150,00` (mÃ©dio)
     - `periodicidade`: `MENSAL`
     - `location`: `https://pix.bcb.gov.br/api/v2/rec/RR456789012025030100004`

2. **Cliente paga a fatura**
   - LÃª o QR Code.
   - Paga R$150,00 via Pix (com vencimento ou nÃ£o).

3. **Oferta de Pix AutomÃ¡tico**
   - ApÃ³s o pagamento, o app do PSP pagador exibe:
     > â€œQuer autorizar pagamentos automÃ¡ticos mensais de atÃ© R$150,00 para Energia S.A.? [Sim] [NÃ£o]â€

4. **AceitaÃ§Ã£o**
   - Cliente clica em â€œSimâ€.
   - PSP pagador envia `pain.012` com `status = true`.

5. **AtivaÃ§Ã£o**
   - PSP recebedor confirma.
   - PrÃ³xima fatura serÃ¡ debitada automaticamente em `2025-05-10`.

#### **Regras:**
- A oferta **sÃ³ Ã© feita apÃ³s o pagamento bem-sucedido**.
- Se o pagamento falhar, **nÃ£o hÃ¡ oferta**.
- O cliente pode **recusar** a autorizaÃ§Ã£o.

---

### **CenÃ¡rio 4.2: Cliente recusa a oferta**

**Como** recebedor,  
**Quero** saber o que acontece se o cliente recusar,  
**Para que** eu possa continuar ofertando manualmente.

#### **Fluxo:**
- Cliente clica em â€œNÃ£oâ€.
- PSP pagador **nÃ£o envia `pain.012`**.
- RecorrÃªncia **nÃ£o Ã© autorizada**.
- Recebedor **nÃ£o Ã© notificado**.

#### **AÃ§Ã£o do Recebedor:**
- Continuar ofertando via Jornada 1 ou 2.
- Enviar e-mail com QR Code da Jornada 2.

---

## ğŸ”„ **5. GestÃ£o ContÃ­nua da RecorrÃªncia (todas as jornadas)**

### **AlteraÃ§Ãµes na RecorrÃªncia**
- **Antes da confirmaÃ§Ã£o**: Pode alterar `valor`, `periodicidade`, `dataInicio`.
- **ApÃ³s a confirmaÃ§Ã£o**: **NÃ£o pode alterar**. Deve:
  1. Cancelar a recorrÃªncia.
  2. Criar uma nova.
  3. Solicitar nova autorizaÃ§Ã£o.

### **Cancelamento**
- **Pelo pagador**: A qualquer momento (atÃ© vÃ©spera da liquidaÃ§Ã£o).
- **Pelo recebedor**: Pode cancelar cobranÃ§a agendada, **mas nÃ£o apÃ³s 22h do dia anterior**.

### **Retentativas**
- **RIFL**: Nova tentativa intradiÃ¡ria (atÃ© 23h59).
- **NTAG**: Nova tentativa pÃ³s-vencimento (se `politicaRetentativa = S`).
  - **Pagador nÃ£o pode cancelar** agendamentos com `NTAG`.

---

## ğŸ“¢ **6. NotificaÃ§Ãµes ObrigatÃ³rias para o Recebedor**

O PSP recebedor **deve informar** o recebedor em:

| SituaÃ§Ã£o | NotificaÃ§Ã£o |
|--------|-------------|
| Sucesso do agendamento | â€œDÃ©bito agendado para 15/04â€ |
| Falha no agendamento | â€œValor divergente. DÃ©bito nÃ£o agendado.â€ |
| Cancelamento pelo pagador | â€œAutorizaÃ§Ã£o cancelada pelo pagadorâ€ |
| Sucesso no cancelamento da cobranÃ§a | â€œCobranÃ§a cancelada com sucessoâ€ |
| Falha no cancelamento da cobranÃ§a | â€œCancelamento nÃ£o permitido apÃ³s 22hâ€ |

---

## ğŸ“Œ **7. Boas PrÃ¡ticas para o Recebedor**

1. **Escolha a jornada certa**:
   - Jornada 1: Relacionamento direto.
   - Jornada 2: ReutilizaÃ§Ã£o de QR Code.
   - Jornada 3: Entrada + recorrÃªncia.
   - Jornada 4: MigraÃ§Ã£o de pagadores.

2. **Use API Pix ou arquivo padronizado** para escalar.

3. **Monitore o status** das recorrÃªncias: â€œcriadaâ€, â€œpendenteâ€, â€œconfirmadaâ€.

4. **Defina `dataFim` com margem** para retentativas.

5. **Ajuste para dia Ãºtil** com base no `codMunIBGE` do pagador.

6. **NÃ£o cobre tarifa do pagador** â€“ Ã© vedado.

7. **OfereÃ§a suporte** para cancelamento e dÃºvidas.

---

## ğŸ **ConclusÃ£o**

O **recebedor Ã© o protagonista** do Pix AutomÃ¡tico. Ele define o modelo de negÃ³cio, escolhe a jornada, cria as recorrÃªncias e gerencia o relacionamento com o pagador.

As **quatro jornadas** oferecem flexibilidade para diferentes cenÃ¡rios:
- **Jornada 1**: Relacionamento direto e personalizado.
- **Jornada 2**: Escalabilidade com QR Code reutilizÃ¡vel.
- **Jornada 3**: ConversÃ£o imediata com pagamento inicial.
- **Jornada 4**: MigraÃ§Ã£o suave de pagadores manuais.

Com as boas prÃ¡ticas acima, o recebedor pode **automatizar cobranÃ§as**, **reduzir inadimplÃªncia** e **melhorar a experiÃªncia do cliente**.

---

Se desejar, posso gerar:
- Um **modelo de checklist operacional** para recebedores
- Um **fluxograma em portuguÃªs** das jornadas
- Um **template de e-mail** para ofertar Pix AutomÃ¡tico
- Um **relatÃ³rio de impacto financeiro** por jornada

Deseja algum desses artefatos?
